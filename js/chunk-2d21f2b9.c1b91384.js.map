{"version":3,"sources":["webpack:///./src/pages/PlaceProvider/Limits.vue?1725","webpack:///src/pages/PlaceProvider/Limits.vue","webpack:///./src/pages/PlaceProvider/Limits.vue?c48c","webpack:///./src/pages/PlaceProvider/Limits.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","placePrivider","companyName","_e","tabIndex","class","place","places","model","value","callback","$$v","expression","ref","calendarOptions","eventinfo","event","start","on","$event","unassignClick","modalEditShow","_f","end","assignClick","modalSetupShow","placeObj","name","fromDate","untilDateMinusOneDay","displayHoursFrom","displayHoursUntil","untilDate","limit","staticRenderFns","components","FullCalendar","data","selectedUsers","sendingInvitation","dataInvitations","allocations","Date","toISOString","roles","DocumentManager","MedicLab","DataExporter","Helper","MedicTester","revision","person","email","phone","message","fields","fieldsInvitations","locale","headerToolbar","center","initialView","plugins","selectable","eventClick","select","selectAllow","contentHeight","slotDuration","displayEventTime","firstDay","eventDisplay","events","selection","title","allDay","computed","$store","state","placeProvider","find","pp","user","tokenData","canAssign","hasRole","index","fullDayMode","day","setDate","getDate","compare","a","b","Object","values","sort","watch","ListPPInvites","placeProviderId","console","log","$refs","calendar","$nextTick","calendarApi","next","prev","ListPlaceLimits","then","ListScheduledDays","placeId","r","allPlaces","mounted","ListPrivate","ReloadPlaces","methods","SetLimitToPlace","limits","event1","event2","SetPlaceLimitation","from","until","openError","RemovePlaceLimit","redrawEvents","hourLimit","backgroundColor","push","processScheduledDays","actions","info","startStr","endStr","getHours","date","formatRoles","item","join","deleteUserClick","confirm","RemoveUser","deleteInvitationClick","eventRender","element","DeletePlaceLimitation","limitId","id","setHours","dateObj","date2","color","roleStyle","getBackground","roleColor","role","role2Text","name2shortcut","split","length","toUpperCase","substring","getUser","users","userNotSelected","roleNotSelected","component"],"mappings":"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","file":"js/chunk-2d21f2b9.c1b91384.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"app-pane-lgray py-2\"},[_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('b-row',[_c('b-col',{attrs:{\"md\":\"7\"}},[_c('h1',[_vm._v(\" Hodinové limity odberných miest \"),(_vm.placePrivider)?_c('span',[_vm._v(_vm._s(_vm.placePrivider.companyName))]):_vm._e()])]),(_vm.tabIndex === 0)?_c('b-col',{attrs:{\"md\":\"5\"}},[_c('b-form-select',{staticClass:\"mt-2\",class:this.place === '' ? 'border-danger' : '',attrs:{\"options\":_vm.places,\"text-field\":\"name\",\"value-field\":\"id\"},model:{value:(_vm.place),callback:function ($$v) {_vm.place=$$v},expression:\"place\"}},[_c('b-form-select-option',{attrs:{\"disabled\":\"\",\"value\":\"\"}},[_vm._v(\"Vyberte si miesto pre správu limitov\")])],1)],1):_vm._e()],1)],1)],1),_c('b-container',{staticClass:\"my-4\",attrs:{\"fluid\":\"\"}},[_c('b-row',[_c('b-col',[_c('FullCalendar',{ref:\"calendar\",attrs:{\"id\":\"calendar\",\"options\":_vm.calendarOptions}})],1)],1)],1),(_vm.eventinfo && _vm.eventinfo.event && _vm.eventinfo.event.start)?_c('b-modal',{attrs:{\"title\":\"Alokácia limitácie odberného miesta\",\"ok-title\":\"Odobrať limit\",\"cancel-title\":\"Zrušiť\"},on:{\"ok\":function($event){return _vm.unassignClick(_vm.eventinfo.event)}},model:{value:(_vm.modalEditShow),callback:function ($$v) {_vm.modalEditShow=$$v},expression:\"modalEditShow\"}},[_c('div',[_vm._v(\" Limit pre čas: \"+_vm._s(_vm._f(\"formatDateTime\")(_vm.eventinfo.event.start))+\" - \"+_vm._s(_vm._f(\"formatDateTime\")(_vm.eventinfo.event.end))+\" \")])]):_vm._e(),_c('b-modal',{attrs:{\"title\":\"Alokácia limitácií odberného miesta\",\"ok-title\":\"Priradiť\",\"cancel-title\":\"Zrušiť\"},on:{\"ok\":_vm.assignClick},model:{value:(_vm.modalSetupShow),callback:function ($$v) {_vm.modalSetupShow=$$v},expression:\"modalSetupShow\"}},[(this.place === '')?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(\" Vyberte si odberové miesto \")]):_c('div',[_c('h4',[_vm._v(\"Odberové miesto\")]),_c('p',[_vm._v(_vm._s(this.placeObj.name))])]),_c('h4',[_vm._v(\"Časová alokácia\")]),(_vm.fullDayMode)?_c('div',[_vm._v(\" Limit na celý pracovný deň \"),_c('div',[_vm._v(\" Pre dátumy Od \"+_vm._s(_vm._f(\"formatDate\")(_vm.fromDate))+\" Do \"+_vm._s(_vm._f(\"formatDate\")(_vm.untilDateMinusOneDay))+\" večer \")])]):_c('div',[_vm._v(\" Denne Od \"+_vm._s(_vm.displayHoursFrom())+\":00 Do \"+_vm._s(_vm.displayHoursUntil())+\":00 \"),_c('div',[_vm._v(\" Pre dátumy Od \"+_vm._s(_vm._f(\"formatDate\")(_vm.fromDate))+\" Do \"+_vm._s(_vm._f(\"formatDate\")(_vm.untilDate))+\" \")])]),_c('div',[_c('label',{attrs:{\"for\":\"limit\"}},[_c('h4',[_vm._v(\"Hodinový limit\")])]),_c('b-input',{attrs:{\"id\":\"limit\",\"type\":\"number\",\"min\":\"0\",\"max\":\"1000\"},model:{value:(_vm.limit),callback:function ($$v) {_vm.limit=$$v},expression:\"limit\"}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"app-pane-lgray py-2\">\n      <b-container fluid>\n        <b-row>\n          <b-col md=\"7\">\n            <h1>\n              Hodinové limity odberných miest\n              <span v-if=\"placePrivider\">{{ placePrivider.companyName }}</span>\n            </h1>\n          </b-col>\n          <b-col md=\"5\" v-if=\"tabIndex === 0\">\n            <b-form-select\n              v-model=\"place\"\n              :options=\"places\"\n              text-field=\"name\"\n              value-field=\"id\"\n              class=\"mt-2\"\n              :class=\"this.place === '' ? 'border-danger' : ''\"\n            >\n              <b-form-select-option disabled value=\"\"\n                >Vyberte si miesto pre správu limitov</b-form-select-option\n              >\n            </b-form-select>\n          </b-col>\n        </b-row>\n      </b-container>\n    </div>\n\n    <b-container class=\"my-4\" fluid>\n      <b-row>\n        <b-col>\n          <FullCalendar\n            ref=\"calendar\"\n            id=\"calendar\"\n            :options=\"calendarOptions\"\n          />\n        </b-col>\n      </b-row>\n    </b-container>\n    <b-modal\n      title=\"Alokácia limitácie odberného miesta\"\n      v-if=\"eventinfo && eventinfo.event && eventinfo.event.start\"\n      v-model=\"modalEditShow\"\n      ok-title=\"Odobrať limit\"\n      cancel-title=\"Zrušiť\"\n      @ok=\"unassignClick(eventinfo.event)\"\n    >\n      <div>\n        Limit pre čas: {{ eventinfo.event.start | formatDateTime }} -\n        {{ eventinfo.event.end | formatDateTime }}\n      </div>\n    </b-modal>\n    <b-modal\n      title=\"Alokácia limitácií odberného miesta\"\n      v-model=\"modalSetupShow\"\n      ok-title=\"Priradiť\"\n      cancel-title=\"Zrušiť\"\n      @ok=\"assignClick\"\n    >\n      <div class=\"alert alert-danger\" v-if=\"this.place === ''\">\n        Vyberte si odberové miesto\n      </div>\n      <div v-else>\n        <h4>Odberové miesto</h4>\n        <p>{{ this.placeObj.name }}</p>\n      </div>\n\n      <h4>Časová alokácia</h4>\n      <div v-if=\"fullDayMode\">\n        Limit na celý pracovný deň\n        <div>\n          Pre dátumy Od {{ fromDate | formatDate }} Do\n          {{ untilDateMinusOneDay | formatDate }} večer\n        </div>\n      </div>\n      <div v-else>\n        Denne Od {{ displayHoursFrom() }}:00 Do {{ displayHoursUntil() }}:00\n        <div>\n          Pre dátumy Od {{ fromDate | formatDate }} Do\n          {{ untilDate | formatDate }}\n        </div>\n      </div>\n\n      <div>\n        <label for=\"limit\"><h4>Hodinový limit</h4></label>\n        <b-input id=\"limit\" type=\"number\" min=\"0\" max=\"1000\" v-model=\"limit\" />\n      </div>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport FullCalendar from \"@fullcalendar/vue\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport skLocale from \"@fullcalendar/core/locales/sk\";\n\nexport default {\n  components: {\n    FullCalendar,\n  },\n  data() {\n    return {\n      limit: 0,\n      modalEditShow: false,\n      modalSetupShow: false,\n      eventinfo: {},\n      selectedUsers: {},\n      sendingInvitation: false,\n      dataInvitations: [],\n      allocations: [],\n      fromDate: new Date().toISOString(),\n      untilDate: new Date().toISOString(),\n      roles: {\n        DocumentManager: false,\n        MedicLab: false,\n        DataExporter: false,\n        Helper: false,\n        MedicTester: false,\n      },\n      revision: false,\n      place: \"\",\n      data: [],\n      tabIndex: -1,\n      person: {\n        name: \"\",\n        email: \"\",\n        phone: \"\",\n        message: \"\",\n      },\n      fields: [\n        {\n          label: \"Meno\",\n          key: \"name\",\n          sortable: true,\n        },\n        {\n          label: \"Email\",\n          key: \"email\",\n          sortable: true,\n        },\n        {\n          label: \"Akcie\",\n          key: \"actions\",\n          sortable: false,\n        },\n      ],\n      fieldsInvitations: [\n        {\n          label: \"Meno\",\n          key: \"name\",\n          sortable: true,\n        },\n        {\n          label: \"Email\",\n          key: \"email\",\n          sortable: true,\n        },\n        {\n          label: \"Pozvaný osobou\",\n          key: \"inviterName\",\n          sortable: true,\n        },\n        {\n          label: \"Čas pozvánky\",\n          key: \"invitationTime\",\n          sortable: true,\n        },\n        {\n          label: \"Stav pozvánky\",\n          key: \"status\",\n          sortable: true,\n        },\n        {\n          label: \"Akcie\",\n          key: \"actions\",\n          sortable: false,\n        },\n      ],\n      calendarOptions: {\n        locale: skLocale,\n        headerToolbar: {\n          start: \"dayGridWeek,dayGridMonth timeGridWeek,timeGridDay\",\n          center: \"title\",\n          end: \"today prev,next\",\n        },\n        initialView: \"timeGridWeek\",\n        plugins: [dayGridPlugin, timeGridPlugin, interactionPlugin],\n        selectable: true,\n        eventClick: this.eventClick,\n        select: this.select,\n        selectAllow: this.selectAllow,\n        contentHeight: 500,\n        slotDuration: \"01:00:00\",\n        displayEventTime: false,\n        firstDay: 1, // from monday\n        eventDisplay: \"block\",\n        /*\n        businessHours: [\n          // specify an array instead\n          {\n            daysOfWeek: [1, 2, 3], // Monday, Tuesday, Wednesday\n            startTime: \"08:00\", // 8am\n            endTime: \"18:00\", // 6pm\n          },\n          {\n            daysOfWeek: [4, 5], // Thursday, Friday\n            startTime: \"10:00\", // 10am\n            endTime: \"16:00\", // 4pm\n          },\n        ],*/\n\n        //hiddenDays: [2, 3],\n        events: [],\n      },\n      events: [],\n      selection: {\n        title: \"Title\",\n        allDay: true,\n      },\n    };\n  },\n  computed: {\n    placePrivider() {\n      if (!this.$store.state.placeProvider.places) return {};\n      return this.$store.state.placeProvider.places.find(\n        p => p.placeProviderId === this.pp\n      );\n    },\n    pp() {\n      if (!this.$store.state) return \"\";\n      return this.$store.state.user.tokenData.pp;\n    },\n    placeObj() {\n      if (!this.$store.state.place.places) return {};\n      return this.$store.state.place.places[this.place];\n    },\n    canAssign() {\n      var hasRole =\n        this.roles.MedicTester ||\n        this.roles.DocumentManager ||\n        this.roles.MedicLab ||\n        this.roles.DataExporter ||\n        this.roles.Helper;\n      if (!hasRole) return false;\n      for (let index in this.selectedUsers) {\n        if (this.selectedUsers[index]) return true;\n      }\n      return false;\n    },\n    fullDayMode() {\n      return this.displayHoursFrom() == this.displayHoursUntil();\n    },\n    untilDateMinusOneDay() {\n      const day = new Date(this.untilDate);\n      return day.setDate(day.getDate() - 1);\n    },\n\n    places() {\n      function compare(a, b) {\n        if (a.name < b.name) return -1;\n        if (a.name > b.name) return 1;\n        return 0;\n      }\n      return Object.values(this.$store.state.place.places).sort(compare);\n    },\n  },\n\n  watch: {\n    pp() {\n      this.ListPPInvites({\n        placeProviderId: this.pp,\n      });\n    },\n    placePrivider() {\n      console.log(\"placePrivider\", this.placePrivider);\n    },\n    tabIndex() {\n      if (this.$refs.calendar) {\n        this.$nextTick(() => {\n          const calendarApi = this.$refs.calendar.getApi();\n          calendarApi.next();\n          calendarApi.prev();\n        });\n      }\n    },\n    place() {\n      console.log(\"place\", this.place);\n      this.ListPlaceLimits().then(r2 => {\n        this.allocations = r2;\n        console.log(\"this.allocations2\", this.allocations);\n        this.redrawEvents();\n      });\n      this.ListScheduledDays({\n        placeId: this.place,\n      }).then(r => {\n        if (r) {\n          this.processScheduledDays();\n        }\n      });\n    },\n    allPlaces() {\n      this.ListScheduledDays({\n        placeId: this.place,\n      }).then(r => {\n        if (r) {\n          this.processScheduledDays();\n        }\n      });\n    },\n    fromDate() {},\n    untilDate() {},\n  },\n  mounted() {\n    this.ListPrivate().then(r => {\n      if (r) {\n        this.ListPlaceLimits().then(r2 => {\n          this.allocations = r2;\n          this.redrawEvents();\n          console.log(\"this.allocations1\", this.allocations);\n        });\n      }\n    });\n    this.ReloadPlaces();\n    this.ListPPInvites({\n      placeProviderId: this.pp,\n    }).then(r => {\n      if (r) {\n        this.dataInvitations = r;\n      }\n    });\n    this.tabIndex = 0;\n  },\n  methods: {\n    ...mapActions({\n      ListPrivate: \"placeProvider/ListPrivate\",\n      InviteUser: \"user/InviteUser\",\n      ListPPInvites: \"user/ListPPInvites\",\n      InviteUserToPP: \"placeProvider/InviteUserToPP\",\n      LoadUsers: \"user/LoadUsers\",\n      RemoveUser: \"user/RemoveUser\",\n      ListScheduledDays: \"place/ListScheduledDays\",\n      ReloadPlaces: \"place/ReloadPrivatePlaces\",\n      SetPlaceLimitation: \"place/SetPlaceLimitation\",\n      DeletePlaceLimitation: \"place/DeletePlaceLimitation\",\n    }),\n    ...mapActions({\n      openSuccess: \"snackbar/openSuccess\",\n      openError: \"snackbar/openError\",\n    }),\n    SetLimitToPlace(limits) {\n      if (!this.place) {\n        this.openError(\"Zadajte miesto\");\n        return;\n      }\n      if (!limits) {\n        this.openError(\"Limity neboli zadané\");\n        return;\n      }\n      console.log(\"limits\", limits, this.limit);\n\n      for (const index in limits) {\n        const event1 = limits[index];\n        for (const index2 in event1) {\n          const event2 = event1[index2];\n          console.log(\"event1\", event1, event2);\n          this.SetPlaceLimitation({\n            placeId: this.place,\n            from: event2.start,\n            until: event2.end,\n            limit: this.limit,\n          });\n        }\n      }\n      this.ListPlaceLimits().then(r2 => {\n        this.allocations = r2;\n        console.log(\"this.allocations1\", this.allocations);\n        this.ReloadPlaces().then(r3 => {\n          console.log(\"this.ReloadPlaces\", this.allocations, r3);\n          this.redrawEvents();\n          this.events = [];\n        });\n      });\n    },\n    async ListPlaceLimits() {\n      this.ReloadPlaces().then(r => {\n        if (!this.placeObj) return;\n        return this.placeObj.otherLimitations;\n      });\n    },\n    RemovePlaceLimit(placeId, limitId) {},\n    redrawEvents() {\n      if (!this.placeObj) return;\n      const allocations = this.placeObj.otherLimitations;\n      this.calendarOptions.events = [];\n      for (let index in allocations) {\n        allocations[index].title = allocations[index].hourLimit;\n        allocations[index].backgroundColor = \"blue\";\n        allocations[index].allDay = false;\n        allocations[index].start = allocations[index].from;\n        allocations[index].end = allocations[index].until;\n\n        this.calendarOptions.events.push(allocations[index]);\n      }\n    },\n    processScheduledDays() {\n      this.events = [];\n      this.actions = {};\n    },\n    eventClick: function (info) {\n      this.eventinfo = info;\n      this.modalEditShow = true;\n    },\n    select: function (info) {\n      this.fromDate = info.startStr;\n      this.untilDate = info.endStr;\n      this.modalSetupShow = true;\n    },\n    displayHoursFrom() {\n      return new Date(this.fromDate).getHours();\n    },\n    displayHoursUntil() {\n      return new Date(this.untilDate).getHours();\n    },\n    selectAllow: function (info) {\n      console.log(\"info\", info, new Date() < info.start);\n      const currDate = new Date();\n      const date = currDate.setDate(currDate.getDate() - 1);\n\n      if (date > info.start) return false;\n      return true;\n\n      // return true;\n    },\n    formatRoles(data) {\n      return data.item.roles.join(\", \");\n    },\n    deleteUserClick(row) {\n      if (confirm(\"Naozaj chcete vymazať užívateľa?\")) {\n        this.RemoveUser({ email: row.item.email }).then(r => {\n          if (r) {\n            this.LoadUsers().then(r => {\n              if (r) {\n                this.data = Object.values(r);\n              }\n            });\n          }\n        });\n      }\n    },\n    deleteInvitationClick(row) {\n      if (confirm(\"Naozaj chcete zrušiť pozvánku?\")) {\n        console.log(\"todo\");\n      }\n    },\n    eventRender: function (event, element) {\n      console.log(\"eventRender\", event);\n      element\n        .find(\"span.fc-event-title\")\n        .html(element.find(\"span.fc-event-title\").text());\n    },\n    unassignClick(event) {\n      if (confirm(\"Naozaj chcete odobrať tento limit?\")) {\n        this.DeletePlaceLimitation({\n          limitId: event.id,\n          placeId: this.place,\n        }).then(r => {\n          if (r) {\n            this.ReloadPlaces().then(r3 => {\n              this.ListPlaceLimits().then(r2 => {\n                this.allocations = r2;\n                this.redrawEvents();\n              });\n            });\n          }\n        });\n      }\n    },\n    assignClick() {\n      const from = new Date(this.fromDate);\n      const until = new Date(this.untilDate);\n      from.setHours(12, 0, 0, 0);\n      until.setHours(12, 0, 0, 0);\n      if (this.fullDayMode) {\n        until.setDate(until.getDate() - 1);\n      }\n      for (\n        var d = new Date(from);\n        d <= new Date(until);\n        d.setDate(d.getDate() + 1)\n      ) {\n        const dateObj = new Date(d);\n        if (this.fullDayMode) {\n          dateObj.setHours(0, 0, 0, 0);\n        } else {\n          dateObj.setHours(new Date(this.fromDate).getHours(), 0, 0, 0);\n        }\n        const date = dateObj.toISOString();\n        if (this.fullDayMode) {\n          dateObj.setHours(24, 0, 0, 0);\n        } else {\n          dateObj.setHours(new Date(this.untilDate).getHours(), 0, 0, 0);\n        }\n        const date2 = dateObj.toISOString();\n        const color = \"red\";\n        this.events.push({\n          title: this.limit,\n          start: date,\n          end: date2,\n          backgroundColor: color,\n        });\n      }\n\n      this.SetLimitToPlace({\n        limits: this.events,\n      });\n      console.log(\"this.events\", this.events);\n    },\n    roleStyle(role) {\n      const color = this.roleColor(role);\n      return `background: ${color}; color: white; border-radius: 3px; margin-bottom: 5px; padding: 2px 5px; font-weight:bold; `;\n    },\n    getBackground(role) {\n      return this.roleColor(role);\n    },\n    roleColor(role) {\n      if (!role) return \"black\";\n      switch (role) {\n        case \"Helper\":\n          return \"#666\";\n        case \"MedicTester\":\n          return \"green\";\n        case \"MedicLab\":\n          return \"blue\";\n        case \"DocumentManager\":\n          return \"darkorange\";\n        case \"DataExporter\":\n          return \"purple\";\n      }\n      return \"red\";\n    },\n    role2Text(role) {\n      console.log(\"role2Text.role\", role);\n      if (!role) return \"?\";\n      switch (role) {\n        case \"Helper\":\n          return \"Pomocník\";\n        case \"MedicTester\":\n          return \"Doktor pri odbere\";\n        case \"MedicLab\":\n          return \"Doktor v laboratóriu\";\n        case \"DocumentManager\":\n          return \"Správca certifikátov\";\n        case \"DataExporter\":\n          return \"Exporter údajov pre hygienu\";\n      }\n      return \"red\";\n    },\n    name2shortcut(name) {\n      if (!name) {\n        return \"???\";\n      }\n      const split = name.trim().split(\" \");\n\n      if (split.length == 1) {\n        if (name.length <= 3) {\n          return name.toUpperCase();\n        } else {\n          return name.substring(0, 3).toUpperCase();\n        }\n      } else {\n        if (split[0].length >= 1 && split[split.length - 1].length >= 2) {\n          return (\n            split[0].substring(0, 1) + split[split.length - 1].substring(0, 2)\n          ).toUpperCase();\n        } else {\n          return (\n            (\n              split[0].substring(0, 1) + split[split.length - 1].substring(0, 1)\n            ).toUpperCase() + \"?\"\n          );\n        }\n      }\n    },\n    getUser(email) {\n      return this.placePrivider.users.find(u => u.email == email);\n    },\n    userNotSelected() {\n      for (let user in this.selectedUsers) {\n        if (!this.selectedUsers[user]) continue;\n        return false;\n      }\n      return true;\n    },\n    roleNotSelected() {\n      for (let role in this.roles) {\n        if (!this.roles[role]) continue;\n        return false;\n      }\n      return true;\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Limits.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Limits.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Limits.vue?vue&type=template&id=524e952e&\"\nimport script from \"./Limits.vue?vue&type=script&lang=js&\"\nexport * from \"./Limits.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}