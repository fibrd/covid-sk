{"version":3,"sources":["webpack:///./src/pages/Admin/TestingTime.vue?6791","webpack:///src/pages/Admin/TestingTime.vue","webpack:///./src/pages/Admin/TestingTime.vue?20ff","webpack:///./src/pages/Admin/TestingTime.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","$t","placePrivider","companyName","_e","_l","sortedActions","item","index","key","type","Date","date","toLocaleDateString","placeObj","name","openingHoursTemplateId","template1","on","saveClick","revisionBackClick","revision","staticStyle","model","value","callback","$$v","allPlaces","expression","places","place","fromDate","untilDate","$event","createEvent","calendarOptions","revisionClick","staticRenderFns","components","FullCalendar","VueCtkDateTimePicker","data","actions","day","from","until","toISOString","locale","plugins","initialView","selectable","select","selectAllow","showNonCurrentDates","fixedWeekCount","contentHeight","firstDay","events","computed","$store","state","obj","template2","template3","placeProvider","find","pp","user","tokenData","compare","a","b","Object","values","sort","watch","ListScheduledDays","placeId","r","mounted","ListPrivate","ReloadPlaces","methods","processScheduledDays","openingHoursTemplates","length","title","bck","getBackground","openingHours","push","start","allDay","backgroundColor","console","log","i","ret","info","setHours","end","ScheduleOpenningHours","color","dateObj","text","component"],"mappings":"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","file":"js/chunk-2d21ef75.54d6b568.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"app-pane-lgray py-2\"},[_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\" \"+_vm._s(_vm.$t(\"workingTimeScheduleTitle\"))+\": \"),(_vm.placePrivider)?_c('span',[_vm._v(_vm._s(_vm.placePrivider.companyName))]):_vm._e()])])],1),(_vm.revision)?_c('div',{staticClass:\"py-3\"},[_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('b-row',[_c('b-col',[_c('h2',[_vm._v(\"Revízia zmien\")]),_c('ol',{attrs:{\"id\":\"example-2\"}},_vm._l((_vm.sortedActions()),function(item,index){return _c('li',{key:index},[(item.type === 'delete')?_c('span',[_vm._v(\" Dňa \"),_c('b',[_vm._v(_vm._s(new Date(item.date).toLocaleDateString(\"sk\")))]),_vm._v(\" bude odberové miesto \"),_c('b',[_vm._v(\"zavreté\")])]):_vm._e(),(item.type === 'set')?_c('span',[_vm._v(\" Dňa \"),_c('b',[_vm._v(_vm._s(new Date(item.date).toLocaleDateString(\"sk\")))]),_vm._v(\" bude odberové miesto \"),(_vm.placeObj)?_c('span',[_c('b',[_vm._v(_vm._s(_vm.placeObj.name))])]):_vm._e(),_vm._v(\" otvorené so šablónou \"),_c('b',[_vm._v(\"č. \"+_vm._s(item.openingHoursTemplateId))]),(!_vm.placeObj)?_c('span',[_vm._v(\"ktorá je nastavená v každom odbernom mieste zvlášť\")]):_vm._e()]):_vm._e(),(_vm.placeObj)?_c('span',[_vm._v(\" - \"),_c('b',[_vm._v(_vm._s(_vm.template1))])]):_vm._e()])}),0)])],1),_c('b-row',[_c('b-col',{attrs:{\"offset-md\":\"0\"}},[(_vm.allPlaces)?_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(\" Pozor! Chystáte sa zmeniť otváracie miesta na všetkých Vašich odberných miestach \")]):_vm._e(),_c('b-button',{staticClass:\"m-2\",attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.saveClick}},[_vm._v(\" Uložiť \"),_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"17.5\",\"height\":\"19\",\"viewBox\":\"0 0 33 40\",\"role\":\"presentation\",\"focusable\":\"false\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M0 0h13l20 20-20 20H0l20-20z\"}})])]),_c('b-button',{staticClass:\"m-2\",attrs:{\"variant\":\"light\"},on:{\"click\":_vm.revisionBackClick}},[_vm._v(\" Späť \")])],1)],1)],1)],1):_vm._e(),(!_vm.revision)?_c('div',{staticClass:\"py-3\",staticStyle:{\"margin-bottom\":\"10px\"}},[_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('b-row',[_c('b-col',{attrs:{\"md\":\"3\"}},[_c('p')]),_c('b-col',{attrs:{\"md\":\"2\"}},[_c('b',[_vm._v(\"Nastavujete čas pre:\")]),_c('b-form-checkbox',{staticClass:\"text-right\",attrs:{\"id\":\"allPlaces\",\"name\":\"allPlaces\"},model:{value:(_vm.allPlaces),callback:function ($$v) {_vm.allPlaces=$$v},expression:\"allPlaces\"}},[_vm._v(\" Všetky miesta \")])],1),_c('b-col',{attrs:{\"cols\":\"7\"}},[_c('b-form-select',{attrs:{\"disabled\":_vm.allPlaces,\"options\":_vm.places,\"text-field\":\"name\",\"value-field\":\"id\"},model:{value:(_vm.place),callback:function ($$v) {_vm.place=$$v},expression:\"place\"}},[_c('b-form-select-option',{attrs:{\"disabled\":\"\",\"value\":\"\"}},[_vm._v(\"Vyberte si miesto pre nastavenie harmonogramu otváracích hodín\")])],1)],1)],1)],1)],1):_vm._e(),(!_vm.revision)?_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('b-row',[_c('b-col',{attrs:{\"md\":\"3\"}},[_c('h2',[_vm._v(\"Otváracie hodiny\")]),_c('b-row',[_c('b-col',[_vm._v(\" Od \"),_c('VueCtkDateTimePicker',{attrs:{\"only-date\":true,\"formatted\":\"DD.MM.YYYY\",\"label\":\"Od dátumu\"},model:{value:(_vm.fromDate),callback:function ($$v) {_vm.fromDate=$$v},expression:\"fromDate\"}})],1),_c('b-col',[_vm._v(\" Do \"),_c('VueCtkDateTimePicker',{attrs:{\"only-date\":true,\"formatted\":\"DD.MM.YYYY\",\"label\":\"Do dátumu\"},model:{value:(_vm.untilDate),callback:function ($$v) {_vm.untilDate=$$v},expression:\"untilDate\"}})],1)],1),_c('button',{staticClass:\"my-2 w-100 btn btn-primary\",staticStyle:{\"background\":\"darkgreen\",\"color\":\"white\"},on:{\"click\":function($event){return _vm.createEvent(1)}}},[_vm._v(\" \"+_vm._s(_vm.template1)+\" \")]),_c('button',{staticClass:\"my-2 w-100 btn btn-primary\",staticStyle:{\"background\":\"navy\",\"color\":\"white\"},on:{\"click\":function($event){return _vm.createEvent(2)}}},[_vm._v(\" Šablóna otváracích hodín 2 (víkendy) \")]),_c('button',{staticClass:\"my-2 w-100 btn btn-primary\",staticStyle:{\"background\":\"purple\",\"color\":\"white\"},on:{\"click\":function($event){return _vm.createEvent(3)}}},[_vm._v(\" Šablóna otváracích hodín 3 (sviatky) \")]),_c('button',{staticClass:\"my-2 w-100 btn btn-primary\",staticStyle:{\"background\":\"darkred\",\"color\":\"white\"},on:{\"click\":function($event){return _vm.createEvent(4)}}},[_vm._v(\" Zatvorené \")])],1),_c('b-col',{attrs:{\"md\":\"9\"}},[_c('FullCalendar',{attrs:{\"options\":_vm.calendarOptions}})],1)],1),_c('b-row',{staticClass:\"my-4\"},[_c('b-col',{attrs:{\"offset-md\":\"3\"}},[_c('button',{staticClass:\"btn btn-primary my-2\",on:{\"click\":_vm.revisionClick}},[_vm._v(\" Prehľad zmien \"),_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"17.5\",\"height\":\"19\",\"viewBox\":\"0 0 33 40\",\"role\":\"presentation\",\"focusable\":\"false\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M0 0h13l20 20-20 20H0l20-20z\"}})])])])],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"app-pane-lgray py-2\">\n      <b-container fluid>\n        <h1>\n          {{ $t(\"workingTimeScheduleTitle\") }}:\n          <span v-if=\"placePrivider\">{{ placePrivider.companyName }}</span>\n        </h1>\n      </b-container>\n    </div>\n    <div class=\"py-3\" v-if=\"revision\">\n      <b-container fluid>\n        <b-row>\n          <b-col>\n            <h2>Revízia zmien</h2>\n            <ol id=\"example-2\">\n              <li v-for=\"(item, index) in sortedActions()\" :key=\"index\">\n                <span v-if=\"item.type === 'delete'\">\n                  Dňa\n                  <b>{{ new Date(item.date).toLocaleDateString(\"sk\") }}</b> bude\n                  odberové miesto <b>zavreté</b>\n                </span>\n                <span v-if=\"item.type === 'set'\">\n                  Dňa\n                  <b>{{ new Date(item.date).toLocaleDateString(\"sk\") }}</b> bude\n                  odberové miesto\n                  <span v-if=\"placeObj\"\n                    ><b>{{ placeObj.name }}</b></span\n                  >\n                  otvorené so šablónou\n                  <b>č. {{ item.openingHoursTemplateId }}</b>\n                  <span v-if=\"!placeObj\"\n                    >ktorá je nastavená v každom odbernom mieste zvlášť</span\n                  > </span\n                ><span v-if=\"placeObj\">\n                  - <b>{{ template1 }}</b></span\n                >\n              </li>\n            </ol></b-col\n          >\n        </b-row>\n        <b-row>\n          <b-col offset-md=\"0\">\n            <div class=\"alert alert-danger\" v-if=\"allPlaces\">\n              Pozor! Chystáte sa zmeniť otváracie miesta na všetkých Vašich\n              odberných miestach\n            </div>\n            <b-button @click=\"saveClick\" class=\"m-2\" variant=\"primary\">\n              Uložiť\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"17.5\"\n                height=\"19\"\n                viewBox=\"0 0 33 40\"\n                role=\"presentation\"\n                focusable=\"false\"\n              >\n                <path fill=\"currentColor\" d=\"M0 0h13l20 20-20 20H0l20-20z\" />\n              </svg>\n            </b-button>\n            <b-button @click=\"revisionBackClick\" class=\"m-2\" variant=\"light\">\n              Späť\n            </b-button>\n          </b-col>\n        </b-row>\n      </b-container>\n    </div>\n    <div class=\"py-3\" v-if=\"!revision\" style=\"margin-bottom: 10px\">\n      <b-container fluid>\n        <b-row>\n          <b-col md=\"3\">\n            <p></p>\n          </b-col>\n          <b-col md=\"2\">\n            <b>Nastavujete čas pre:</b>\n            <b-form-checkbox\n              id=\"allPlaces\"\n              v-model=\"allPlaces\"\n              name=\"allPlaces\"\n              class=\"text-right\"\n            >\n              Všetky miesta\n            </b-form-checkbox>\n          </b-col>\n          <b-col cols=\"7\">\n            <b-form-select\n              :disabled=\"allPlaces\"\n              v-model=\"place\"\n              :options=\"places\"\n              text-field=\"name\"\n              value-field=\"id\"\n            >\n              <b-form-select-option disabled value=\"\"\n                >Vyberte si miesto pre nastavenie harmonogramu otváracích\n                hodín</b-form-select-option\n              >\n            </b-form-select>\n          </b-col>\n        </b-row>\n      </b-container>\n    </div>\n    <b-container fluid v-if=\"!revision\">\n      <b-row>\n        <b-col md=\"3\">\n          <h2>Otváracie hodiny</h2>\n          <b-row>\n            <b-col>\n              Od\n              <VueCtkDateTimePicker\n                v-model=\"fromDate\"\n                :only-date=\"true\"\n                formatted=\"DD.MM.YYYY\"\n                label=\"Od dátumu\"\n              />\n            </b-col>\n            <b-col>\n              Do\n              <VueCtkDateTimePicker\n                v-model=\"untilDate\"\n                :only-date=\"true\"\n                formatted=\"DD.MM.YYYY\"\n                label=\"Do dátumu\"\n              />\n            </b-col>\n          </b-row>\n\n          <button\n            @click=\"createEvent(1)\"\n            class=\"my-2 w-100 btn btn-primary\"\n            style=\"background: darkgreen; color: white\"\n          >\n            {{ template1 }}\n          </button>\n          <button\n            @click=\"createEvent(2)\"\n            class=\"my-2 w-100 btn btn-primary\"\n            style=\"background: navy; color: white\"\n          >\n            Šablóna otváracích hodín 2 (víkendy)\n          </button>\n          <button\n            @click=\"createEvent(3)\"\n            class=\"my-2 w-100 btn btn-primary\"\n            style=\"background: purple; color: white\"\n          >\n            Šablóna otváracích hodín 3 (sviatky)\n          </button>\n          <button\n            @click=\"createEvent(4)\"\n            class=\"my-2 w-100 btn btn-primary\"\n            style=\"background: darkred; color: white\"\n          >\n            Zatvorené\n          </button>\n        </b-col>\n        <b-col md=\"9\">\n          <FullCalendar :options=\"calendarOptions\" />\n        </b-col>\n      </b-row>\n      <b-row class=\"my-4\">\n        <b-col offset-md=\"3\">\n          <button @click=\"revisionClick\" class=\"btn btn-primary my-2\">\n            Prehľad zmien\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"17.5\"\n              height=\"19\"\n              viewBox=\"0 0 33 40\"\n              role=\"presentation\"\n              focusable=\"false\"\n            >\n              <path fill=\"currentColor\" d=\"M0 0h13l20 20-20 20H0l20-20z\" />\n            </svg>\n          </button>\n        </b-col>\n      </b-row>\n    </b-container>\n  </div>\n</template>\n\n<script>\nimport FullCalendar from \"@fullcalendar/vue\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport { mapActions } from \"vuex\";\nimport skLocale from \"@fullcalendar/core/locales/sk\";\n\nimport VueCtkDateTimePicker from \"vue-ctk-date-time-picker\";\nimport \"vue-ctk-date-time-picker/dist/vue-ctk-date-time-picker.css\";\n\nexport default {\n  components: {\n    FullCalendar, // make the <FullCalendar> tag available\n    VueCtkDateTimePicker,\n  },\n  data() {\n    return {\n      place: \"\",\n      allPlaces: true,\n      revision: false,\n      actions: {},\n      day: \"2020-10-31T00:00:00+00:00\",\n      from: 9,\n      until: 12,\n      fromDate: new Date().toISOString(),\n      untilDate: new Date().toISOString(),\n\n      calendarOptions: {\n        locale: skLocale,\n        plugins: [dayGridPlugin, interactionPlugin],\n        initialView: \"dayGridMonth\",\n        selectable: true,\n        select: this.select,\n        selectAllow: this.selectAllow,\n        showNonCurrentDates: true,\n        fixedWeekCount: false,\n        contentHeight: 400,\n        firstDay: 1,\n        events: [],\n      },\n    };\n  },\n  computed: {\n    placeObj() {\n      if (!this.$store.state.place.places) return {};\n      if (!this.$store.state.place.places[this.place]) return {};\n      return this.$store.state.place.places[this.place];\n    },\n    template1() {\n      const obj = this.placeObj;\n      if (!obj || !obj[\"openingHoursWorkDay\"])\n        return \"Šablóna otváracích hodín 1\";\n      return obj[\"openingHoursWorkDay\"];\n    },\n    template2() {\n      const obj = this.placeObj;\n      if (!obj || !obj[\"openingHoursOther1\"])\n        return \"Šablóna otváracích hodín 2\";\n      return obj[\"openingHoursOther1\"];\n    },\n    template3() {\n      const obj = this.placeObj;\n      if (!obj || !obj[\"openingHoursOther2\"])\n        return \"Šablóna otváracích hodín 3\";\n      return obj[\"openingHoursOther2\"];\n    },\n    placePrivider() {\n      if (!this.$store.state.placeProvider.places) return {};\n      return this.$store.state.placeProvider.places.find(\n        p => p.placeProviderId === this.pp\n      );\n    },\n    pp() {\n      if (!this.$store.state) return \"\";\n      return this.$store.state.user.tokenData.pp;\n    },\n    places() {\n      function compare(a, b) {\n        if (a.name < b.name) return -1;\n        if (a.name > b.name) return 1;\n        return 0;\n      }\n      return Object.values(this.$store.state.place.places).sort(compare);\n    },\n  },\n  watch: {\n    place() {\n      this.ListScheduledDays({\n        placeId: this.allPlaces ? \"__ALL__\" : this.place,\n      }).then(r => {\n        if (r) {\n          this.processScheduledDays(r);\n        }\n      });\n    },\n    allPlaces() {\n      this.ListScheduledDays({\n        placeId: this.allPlaces ? \"__ALL__\" : this.place,\n      }).then(r => {\n        if (r) {\n          this.processScheduledDays(r);\n        }\n      });\n    },\n  },\n  mounted() {\n    this.ListPrivate();\n    this.ReloadPlaces();\n    this.ListScheduledDays({\n      placeId: this.allPlaces ? \"__ALL__\" : this.place,\n    }).then(r => {\n      if (r) {\n        this.processScheduledDays(r);\n      }\n    });\n  },\n  methods: {\n    ...mapActions({\n      ReloadPlaces: \"place/ReloadPrivatePlaces\",\n      ListPrivate: \"placeProvider/ListPrivate\",\n      ListScheduledDays: \"place/ListScheduledDays\",\n      ScheduleOpenningHours: \"place/ScheduleOpenningHours\",\n    }),\n    ...mapActions({\n      openSuccess: \"snackbar/openSuccess\",\n    }),\n    processScheduledDays(r) {\n      this.calendarOptions.events = [];\n      this.actions = {};\n      for (const index in r) {\n        const day = r[index];\n        let title = \"Rôžne šablóny otv. hodín\";\n        let bck = this.getBackground(0);\n        if (day.openingHoursTemplates.length == 1) {\n          title = \"Šablóna otv. hodín miesta \" + day.openingHoursTemplates[0];\n          bck = this.getBackground(day.openingHoursTemplates[0]);\n        }\n        if (day.openingHours.length == 1) {\n          title = day.openingHours[0];\n        }\n        title += ` [${day.count}]`;\n\n        this.calendarOptions.events.push({\n          title: title,\n          start: day.day,\n          allDay: true,\n          backgroundColor: bck,\n        });\n      }\n      console.log(\"this.calendarOptions.events\", this.calendarOptions.events);\n    },\n    getBackground(i) {\n      if (i == 1) return \"darkgreen\";\n      if (i == 2) return \"navy\";\n      if (i == 3) return \"purple\";\n      if (i == 0) return \"#999\";\n    },\n    sortedActions() {\n      const ret = Object.values(this.actions).sort(\n        (a, b) => new Date(a.date) - new Date(b.date)\n      );\n      console.log(\"ret\", ret);\n      return ret;\n    },\n    select: function (info) {\n      console.log(\"typeof info.startStr\", typeof info.start);\n      info.start.setHours(12, 0, 0, 0);\n      info.end.setHours(0, 0, 0, 0);\n      this.fromDate = info.start.toISOString();\n      this.untilDate = info.end.toISOString();\n    },\n    selectAllow: function (info) {\n      const currDate = new Date();\n      const date = currDate.setDate(currDate.getDate() - 1);\n\n      if (date > info.start) return false;\n      return true;\n\n      // return true;\n    },\n    revisionClick() {\n      this.revision = true;\n    },\n    revisionBackClick() {\n      this.revision = false;\n    },\n    saveClick() {\n      this.ScheduleOpenningHours({ actions: Object.values(this.actions) }).then(\n        r => {\n          if (r) {\n            this.ListScheduledDays({\n              placeId: this.allPlaces ? \"__ALL__\" : this.place,\n            }).then(r2 => {\n              if (r2) {\n                this.processScheduledDays(r2);\n                this.revision = false;\n                this.openSuccess(\n                  \"Dni testovania boli nastavené. Verejnosť sa teraz môže objednať k odberu/vakcinácii.\"\n                );\n              }\n            });\n          }\n        }\n      );\n    },\n    createEvent(i) {\n      let color = \"#999\";\n      if (i == 1) color = \"darkgreen\";\n      if (i == 2) color = \"navy\";\n      if (i == 3) color = \"purple\";\n      for (\n        var d = new Date(this.fromDate);\n        d < new Date(this.untilDate);\n        d.setDate(d.getDate() + 1)\n      ) {\n        const dateObj = new Date(d);\n        dateObj.setHours(12, 0, 0, 0);\n        const date = dateObj.toISOString();\n        this.calendarOptions.events = this.calendarOptions.events.filter(\n          x => x.start !== date\n        );\n        if (i <= 3) {\n          let text = \"Šablóna otv. hodín miesta \" + i;\n          if (i === 1) text = this.template1;\n          if (i === 2) text = this.template2;\n          if (i === 3) text = this.template3;\n          this.calendarOptions.events.push({\n            title: text,\n            start: date,\n            allDay: true,\n            backgroundColor: color,\n          });\n          this.actions[date] = {\n            date,\n            type: \"set\",\n            openingHoursTemplateId: i,\n            placeId: this.allPlaces ? \"__ALL__\" : this.place,\n          };\n        } else {\n          this.actions[date] = {\n            date,\n            type: \"delete\",\n            openingHoursTemplateId: i,\n            placeId: this.allPlaces ? \"__ALL__\" : this.place,\n          };\n        }\n      } /**/\n\n      console.log(\"this.calendarOptions.events\", this.calendarOptions.events);\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TestingTime.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TestingTime.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TestingTime.vue?vue&type=template&id=023a1944&\"\nimport script from \"./TestingTime.vue?vue&type=script&lang=js&\"\nexport * from \"./TestingTime.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}