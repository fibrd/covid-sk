{"version":3,"sources":["webpack:///./src/pages/Tester/Place.vue?3f9d","webpack:///src/pages/Tester/Place.vue","webpack:///./src/pages/Tester/Place.vue?a0e0","webpack:///./src/pages/Tester/Place.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","needPlaceConfirmation","$store","state","user","me","_s","name","placeObj","on","confirmPlace","_e","isAdmin","clearPlace","places","fields","scopedSlots","_u","key","fn","row","$event","selectPlace","staticRenderFns","data","id","description","address","lat","lng","isDriveIn","isWalkIn","limitPer5MinSlot","limitPer1HourSlot","computed","Object","values","place","filter","mounted","ReloadPlaces","then","console","log","r","ReloadMe","methods","item","SetLocation","r2","tokenData","Role","index","component"],"mappings":"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","file":"js/chunk-2d0c8fd6.3f897093.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"app-pane-lgray py-2\"},[_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',[_vm._v(\"Výber miesta\")])])],1),_c('div',[(_vm.needPlaceConfirmation && this.$store.state.user.me)?_c('b-row',[_c('b-col',[_c('div',{staticClass:\"alert alert-info m-2\"},[_vm._v(\" \"+_vm._s(this.$store.state.user.me.name)+\", skontrolujte prosím nastavenie Vášho aktuálneho miesta: \"),(this.$store.state.user.me.placeObj)?_c('span',[_vm._v(\" \"+_vm._s(this.$store.state.user.me.placeObj.name)+\" \"),_c('button',{staticClass:\"btn btn-light m-2\",on:{\"click\":_vm.confirmPlace}},[_vm._v(\" Potvrdiť \")])]):_c('span',[_c('div',{staticClass:\"alert alert-danger m-2\"},[_c('b',[_vm._v(\"Nemáte vybraté miesto\")])])])])])],1):_vm._e(),(!_vm.needPlaceConfirmation && this.$store.state.user.me)?_c('b-row',[_c('b-col',[_c('div',{staticClass:\"alert alert-info m-2\"},[_vm._v(\" Aktuálne pracujete na mieste: \"),(this.$store.state.user.me.placeObj)?_c('span',[_c('b',[_vm._v(_vm._s(this.$store.state.user.me.placeObj.name))])]):_vm._e()])])],1):_vm._e(),(_vm.isAdmin && _vm.$store.state.user.me.placeObj)?_c('b-row',[_c('b-col',[_c('div',{staticClass:\"alert alert-info m-2\"},[_vm._v(\" \"+_vm._s(this.$store.state.user.me.name)+\", ako admin si môžete zrušiť miesto \"),_c('button',{staticClass:\"btn btn-light m-2\",on:{\"click\":_vm.clearPlace}},[_vm._v(\" Zrušiť výber miesta \")])])])],1):_vm._e(),_c('b-table',{attrs:{\"items\":_vm.places,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(id)\",fn:function(row){return [_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.selectPlace(row)}}},[_vm._v(\" Vybrať \"),_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"17.5\",\"height\":\"19\",\"viewBox\":\"0 0 33 40\",\"role\":\"presentation\",\"focusable\":\"false\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M0 0h13l20 20-20 20H0l20-20z\"}})])])]}}])})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"app-pane-lgray py-2\">\n      <b-container fluid>\n        <h1>Výber miesta</h1>\n      </b-container>\n    </div>\n    <div>\n      <b-row v-if=\"needPlaceConfirmation && this.$store.state.user.me\">\n        <b-col>\n          <div class=\"alert alert-info m-2\">\n            {{ this.$store.state.user.me.name }}, skontrolujte prosím nastavenie\n            Vášho aktuálneho miesta:\n            <span v-if=\"this.$store.state.user.me.placeObj\">\n              {{ this.$store.state.user.me.placeObj.name }}\n              <button class=\"btn btn-light m-2\" @click=\"confirmPlace\">\n                Potvrdiť\n              </button>\n            </span>\n            <span v-else>\n              <div class=\"alert alert-danger m-2\">\n                <b>Nemáte vybraté miesto</b>\n              </div>\n            </span>\n          </div>\n        </b-col>\n      </b-row>\n      <b-row v-if=\"!needPlaceConfirmation && this.$store.state.user.me\">\n        <b-col>\n          <div class=\"alert alert-info m-2\">\n            Aktuálne pracujete na mieste:\n            <span v-if=\"this.$store.state.user.me.placeObj\">\n              <b>{{ this.$store.state.user.me.placeObj.name }}</b>\n            </span>\n          </div>\n        </b-col>\n      </b-row>\n      <b-row v-if=\"isAdmin && $store.state.user.me.placeObj\">\n        <b-col>\n          <div class=\"alert alert-info m-2\">\n            {{ this.$store.state.user.me.name }}, ako admin si môžete zrušiť\n            miesto\n            <button class=\"btn btn-light m-2\" @click=\"clearPlace\">\n              Zrušiť výber miesta\n            </button>\n          </div>\n        </b-col>\n      </b-row>\n\n      <b-table :items=\"places\" :fields=\"fields\">\n        <template #cell(id)=\"row\">\n          <button @click=\"selectPlace(row)\" class=\"btn btn-primary\">\n            Vybrať\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"17.5\"\n              height=\"19\"\n              viewBox=\"0 0 33 40\"\n              role=\"presentation\"\n              focusable=\"false\"\n            >\n              <path fill=\"currentColor\" d=\"M0 0h13l20 20-20 20H0l20-20z\" />\n            </svg>\n          </button>\n        </template>\n      </b-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport moment from \"moment\";\n\nexport default {\n  data() {\n    return {\n      id: \"\",\n      name: \"\",\n      description: \"\",\n      address: \"\",\n      lat: 48.289218275462225,\n      lng: 17.272996902465824,\n      isDriveIn: false,\n      isWalkIn: true,\n      limitPer5MinSlot: 5,\n      limitPer1HourSlot: 40,\n      fields: [\n        {\n          label: \"Akcia\",\n          key: \"id\",\n        },\n        {\n          label: \"Názov miesta\",\n          key: \"name\",\n          sortable: true,\n        },\n        {\n          label: \"Adresa\",\n          key: \"address\",\n          sortable: true,\n        },\n      ],\n    };\n  },\n  computed: {\n    places() {\n      return Object.values(this.$store.state.place.places).filter(\n        x => x.isVisible && x.hasReservationSystem\n      );\n    },\n    needPlaceConfirmation() {\n      if (!this.$store.state.user || !this.$store.state.user.me) return false;\n      if (!this.$store.state.user.me.place) return true;\n      return moment(this.$store.state.user.me.placeLastCheck).isBefore(\n        moment().add(-5, \"minutes\")\n      );\n    },\n  },\n  mounted() {\n    this.ReloadPlaces().then(r => {\n      console.log(\"r\", r);\n    });\n\n    this.ReloadMe();\n  },\n  methods: {\n    ...mapActions({\n      ReloadPlaces: \"place/ReloadPlaces\",\n      InsertOrUpdate: \"place/InsertOrUpdate\",\n      ReloadMe: \"user/ReloadMe\",\n      Delete: \"place/Delete\",\n    }),\n    ...mapActions({\n      SetLocation: \"user/SetLocation\",\n    }),\n    ...mapActions({\n      openSuccess: \"snackbar/openSuccess\",\n    }),\n    selectPlace(row) {\n      if (row.item.id) {\n        this.SetLocation({ placeId: row.item.id }).then(r => {\n          if (r) {\n            this.ReloadMe().then(r2 => {\n              if (r2) {\n                this.openSuccess(\"Úspešne ste si nastavili miesto\");\n              }\n            });\n          }\n        });\n      }\n    },\n    confirmPlace() {\n      this.SetLocation({ placeId: this.$store.state.user.me.place }).then(r => {\n        if (r) {\n          this.ReloadMe().then(r2 => {\n            if (r2) {\n              this.openSuccess(\"Úspešne ste potvrdili svoje miesto\");\n            }\n          });\n        }\n      });\n    },\n    clearPlace() {\n      this.SetLocation({ placeId: \"\" }).then(r => {\n        if (r) {\n          this.ReloadMe().then(r2 => {\n            if (r2) {\n              this.openSuccess(\"Úspešne ste zrušili svoje miesto\");\n            }\n          });\n        }\n      });\n    },\n    isAdmin() {\n      for (const index in this.$store.state.user.tokenData.Role) {\n        if (this.$store.state.user.tokenData.Role[index] === \"Admin\")\n          return true;\n      }\n      return false;\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Place.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Place.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Place.vue?vue&type=template&id=0ea996d4&\"\nimport script from \"./Place.vue?vue&type=script&lang=js&\"\nexport * from \"./Place.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}