{"version":3,"sources":["webpack:///./src/pages/Lab/TestResult.vue?522a","webpack:///src/pages/Lab/TestResult.vue","webpack:///./src/pages/Lab/TestResult.vue?3d57","webpack:///./src/pages/Lab/TestResult.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","action","on","$event","_e","reset","attrs","ref","model","value","callback","$$v","next","expression","data","push","code","state","variant","fields","scopedSlots","_u","key","fn","row","splice","index","class","item","_s","processing","send","onDecode","staticRenderFns","components","StreamBarcodeReader","QrcodeStream","useQR","processingCount","methods","result","found","console","log","length","processed","r","timeIsValid","matched","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,cAAc,CAACA,EAAG,KAAK,CAACJ,EAAIO,GAAG,iCAAiC,GAAmB,WAAfP,EAAIQ,OAAqBJ,EAAG,cAAc,CAACA,EAAG,KAAK,CAACJ,EAAIO,GAAG,iCAAiCH,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,SAAS,CAACE,YAAY,iCAAiCG,GAAG,CAAC,MAAQ,SAASC,GAAQV,EAAIQ,OAAS,UAAU,CAACR,EAAIO,GAAG,iDAAiD,GAAGH,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,SAAS,CAACE,YAAY,4CAA4CG,GAAG,CAAC,MAAQ,SAASC,GAAQV,EAAIQ,OAAS,YAAY,CAACR,EAAIO,GAAG,6CAA6C,GAAGH,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,SAAS,CAACE,YAAY,kCAAkCG,GAAG,CAAC,MAAQ,SAASC,GAAQV,EAAIQ,OAAS,aAAa,CAACR,EAAIO,GAAG,sCAAsC,IAAI,GAAGP,EAAIW,KAAqB,SAAfX,EAAIQ,OAAmBJ,EAAG,cAAc,CAACA,EAAG,SAAS,CAACE,YAAY,0CAA0CG,GAAG,CAAC,MAAQT,EAAIY,QAAQ,CAACZ,EAAIO,GAAG,2BAA2BH,EAAG,KAAK,CAACJ,EAAIO,GAAG,yCAAyCP,EAAIW,KAAqB,WAAfX,EAAIQ,OAAqBJ,EAAG,cAAc,CAACA,EAAG,SAAS,CAACE,YAAY,0CAA0CG,GAAG,CAAC,MAAQT,EAAIY,QAAQ,CAACZ,EAAIO,GAAG,2BAA2BH,EAAG,KAAK,CAACJ,EAAIO,GAAG,+CAA+CP,EAAIW,KAAqB,YAAfX,EAAIQ,OAAsBJ,EAAG,cAAc,CAACA,EAAG,SAAS,CAACE,YAAY,0CAA0CG,GAAG,CAAC,MAAQT,EAAIY,QAAQ,CAACZ,EAAIO,GAAG,2BAA2BH,EAAG,KAAK,CAACJ,EAAIO,GAAG,0CAA0CP,EAAIW,KAAqB,WAAfX,EAAIQ,OAAqBJ,EAAG,cAAc,CAACA,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACS,MAAM,CAAC,KAAO,OAAO,CAACT,EAAG,QAAQ,CAACS,MAAM,CAAC,IAAM,SAAS,CAACb,EAAIO,GAAG,eAAeH,EAAG,UAAU,CAACU,IAAI,OAAOD,MAAM,CAAC,GAAK,QAAQE,MAAM,CAACC,MAAOhB,EAAQ,KAAEiB,SAAS,SAAUC,GAAMlB,EAAImB,KAAKD,GAAKE,WAAW,UAAUhB,EAAG,SAAS,CAACE,YAAY,uBAAuBO,MAAM,CAAC,UAAYb,EAAImB,MAAMV,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIqB,KAAKC,KAAK,CAC/9DC,KAAMvB,EAAImB,KACVK,MAAO,eACPC,QAAS,wBACL,CAACzB,EAAIO,GAAG,eAAe,IAAI,GAAGH,EAAG,UAAU,CAACS,MAAM,CAAC,MAAQb,EAAIqB,KAAK,OAASrB,EAAI0B,QAAQC,YAAY3B,EAAI4B,GAAG,CAAC,CAACC,IAAI,WAAWC,GAAG,SAASC,GAAK,MAAO,CAAC3B,EAAG,SAAS,CAACE,YAAY,+BAA+BG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIqB,KAAKW,OAAOD,EAAIE,MAAO,MAAM,CAACjC,EAAIO,GAAG,iBAAiB,CAACsB,IAAI,cAAcC,GAAG,SAASC,GAAK,MAAO,CAAC3B,EAAG,MAAM,CAAC8B,MAAMH,EAAII,KAAKV,SAAS,CAACzB,EAAIO,GAAG,IAAIP,EAAIoC,GAAGL,EAAII,KAAKX,OAAO,WAAW,MAAK,EAAM,cAA8B,SAAfxB,EAAIQ,OAAmBJ,EAAG,cAAc,CAACA,EAAG,SAAS,CAACE,YAAY,sBAAsBO,MAAM,CAAC,SAAWb,EAAIqC,YAAY5B,GAAG,CAAC,MAAQT,EAAIsC,OAAO,CAACtC,EAAIO,GAAG,+BAAgCP,EAAc,WAAEI,EAAG,YAAY,CAACS,MAAM,CAAC,MAAQ,MAAMb,EAAIW,MAAM,KAAKX,EAAIW,KAAqB,WAAfX,EAAIQ,OAAqBJ,EAAG,cAAc,CAACA,EAAG,SAAS,CAACE,YAAY,oBAAoBO,MAAM,CAAC,SAAWb,EAAIqC,YAAY5B,GAAG,CAAC,MAAQT,EAAIsC,OAAO,CAACtC,EAAIO,GAAG,4BAA6BP,EAAc,WAAEI,EAAG,YAAY,CAACS,MAAM,CAAC,MAAQ,MAAMb,EAAIW,MAAM,KAAKX,EAAIW,KAAqB,YAAfX,EAAIQ,OAAsBJ,EAAG,cAAc,CAACA,EAAG,SAAS,CAACE,YAAY,uBAAuBO,MAAM,CAAC,SAAWb,EAAIqC,YAAY5B,GAAG,CAAC,MAAQT,EAAIsC,OAAO,CAACtC,EAAIO,GAAG,+BAAgCP,EAAc,WAAEI,EAAG,YAAY,CAACS,MAAM,CAAC,MAAQ,MAAMb,EAAIW,MAAM,KAAKX,EAAIW,MAAM,GAAGX,EAAIW,KAAqB,WAAfX,EAAIQ,OAAqBJ,EAAG,cAAc,CAAEJ,EAAS,MAAEI,EAAG,gBAAgB,CAACK,GAAG,CAAC,OAAST,EAAIuC,YAAYnC,EAAG,sBAAsB,CAACK,GAAG,CAAC,OAAST,EAAIuC,aAAa,GAAGvC,EAAIW,MAAM,IACh6C6B,EAAkB,G,2tBCuItB,OACEC,WAAY,CACVC,oBAAJ,OACIC,aAAJ,mBAEEtB,KALF,WAMI,MAAO,CACLuB,OAAO,EACPP,YAAY,EACZQ,gBAAiB,EACjBnB,OAAQ,CACd,CACQ,MAAR,QACQ,IAAR,MAEA,CACQ,MAAR,sBACQ,IAAR,OACQ,UAAR,GAEA,CACQ,MAAR,OACQ,IAAR,QACQ,UAAR,IAGML,KAAM,GACNF,KAAM,GACNX,OAAQ,WAGZsC,QAAS,EAAX,KACA,gBACI,WAAJ,uBAFA,IAIIP,SAJJ,SAIA,GACMtC,KAAKkB,KAAO4B,GAEdnC,MAPJ,WAQMX,KAAKO,OAAS,SACdP,KAAKoB,KAAO,IAEdiB,KAXJ,WAWA,WACA,UACM,GAAIrC,KAAKkB,KAAM,CACb,IAAR,KACQ,IAAK,IAAb,eACclB,KAAKoB,KAAKY,GAAOV,MAAQtB,KAAKkB,OAAM6B,GAAQ,GAE7CA,IACH/C,KAAKoB,KAAKC,KAAK,CACbC,KAAMtB,KAAKkB,KACXK,MAAO,eACPC,QAAS,qBAEXxB,KAAKkB,KAAO,IAII,SAAhBlB,KAAKO,SAAmBuC,EAAS,YACjB,YAAhB9C,KAAKO,SAAsBuC,EAAS,YACpB,WAAhB9C,KAAKO,SAAqBuC,EAAS,uBACvCE,QAAQC,IAAI,SAAUH,EAAQ9C,KAAKoB,MACnCpB,KAAKoC,YAAa,EAClBpC,KAAK4C,gBAAkB5C,KAAKoB,KAAK8B,OACjC,IAAN,IAvBA,WAyBA,GACQ,IAAR,iBACQF,QAAQC,IAAI,SAAUH,EAAQxB,GAC9B,EAAR,oDACU6B,IACIC,IACFJ,QAAQC,IAAI,OAAQG,GACpB,EAAZ,yBACY,EAAZ,sCACiBA,EAAEC,cACL,EAAd,qCACc,EAAd,cACA,mDAEiBD,EAAEE,UACL,EAAd,mCACc,EAAd,uCAGcH,GAAa,EAA3B,kBACY,EAAZ,mBApBM,IAAK,IAAX,wBC/MmW,I,YCO/VI,EAAY,eACd,EACAzD,EACAyC,GACA,EACA,KACA,KACA,MAIa,aAAAgB,E","file":"js/chunk-2d0a3165.0f5e1ecd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"app-pane-lgray py-2\"},[_c('b-container',[_c('h1',[_vm._v(\"Oznámenie výsledku testu\")])])],1),(_vm.action === 'select')?_c('b-container',[_c('h2',[_vm._v(\"Vyberte čo idete nascanovať\")]),_c('b-row',[_c('b-col',[_c('button',{staticClass:\"my-2 btn btn-primary bg-danger\",on:{\"click\":function($event){_vm.action = 'sick'}}},[_vm._v(\" Pozitívne výsledky - Chorí na Covid-19 \")])])],1),_c('b-row',[_c('b-col',[_c('button',{staticClass:\"my-2 btn btn-primary bg-warning text-dark\",on:{\"click\":function($event){_vm.action = 'repeat'}}},[_vm._v(\" Chybné výsledky - Na pretestovanie \")])])],1),_c('b-row',[_c('b-col',[_c('button',{staticClass:\"my-2 btn btn-primary bg-success\",on:{\"click\":function($event){_vm.action = 'healthy'}}},[_vm._v(\" Negatívne výsledky - Zdraví \")])])],1)],1):_vm._e(),(_vm.action === 'sick')?_c('b-container',[_c('button',{staticClass:\"float-right bg-light my-2 btn btn-light\",on:{\"click\":_vm.reset}},[_vm._v(\" Späť na výber akcie \")]),_c('h2',[_vm._v(\"Vyberáte pozitívne nálezy - Chorí\")])]):_vm._e(),(_vm.action === 'repeat')?_c('b-container',[_c('button',{staticClass:\"float-right bg-light my-2 btn btn-light\",on:{\"click\":_vm.reset}},[_vm._v(\" Späť na výber akcie \")]),_c('h2',[_vm._v(\"Vyberáte chybné nálezy - Zopakovať test\")])]):_vm._e(),(_vm.action === 'healthy')?_c('b-container',[_c('button',{staticClass:\"float-right bg-light my-2 btn btn-light\",on:{\"click\":_vm.reset}},[_vm._v(\" Späť na výber akcie \")]),_c('h2',[_vm._v(\"Vyberáte negatívne nálezy - Zdraví\")])]):_vm._e(),(_vm.action !== 'select')?_c('b-container',[_c('b-row',[_c('b-col',{attrs:{\"cols\":\"12\"}},[_c('label',{attrs:{\"for\":\"next\"}},[_vm._v(\"Ďalší kód\")]),_c('b-input',{ref:\"next\",attrs:{\"id\":\"next\"},model:{value:(_vm.next),callback:function ($$v) {_vm.next=$$v},expression:\"next\"}}),_c('button',{staticClass:\"btn btn-primary my-2\",attrs:{\"disabled\":!_vm.next},on:{\"click\":function($event){return _vm.data.push({\n              code: _vm.next,\n              state: 'Na odoslanie',\n              variant: 'alert alert-info',\n            })}}},[_vm._v(\" Pridaj \")])],1)],1),_c('b-table',{attrs:{\"items\":_vm.data,\"fields\":_vm.fields},scopedSlots:_vm._u([{key:\"cell(id)\",fn:function(row){return [_c('button',{staticClass:\"btn btn-primary m-2 bg-light\",on:{\"click\":function($event){return _vm.data.splice(row.index, 1)}}},[_vm._v(\" Zrušiť \")])]}},{key:\"cell(state)\",fn:function(row){return [_c('div',{class:row.item.variant},[_vm._v(\" \"+_vm._s(row.item.state)+\" \")])]}}],null,false,2890634596)}),(_vm.action === 'sick')?_c('b-container',[_c('button',{staticClass:\"btn btn-danger my-2\",attrs:{\"disabled\":_vm.processing},on:{\"click\":_vm.send}},[_vm._v(\" Oznámiť pozitívne prípady \"),(_vm.processing)?_c('b-spinner',{attrs:{\"small\":\"\"}}):_vm._e()],1)]):_vm._e(),(_vm.action === 'repeat')?_c('b-container',[_c('button',{staticClass:\"btn btn-info my-2\",attrs:{\"disabled\":_vm.processing},on:{\"click\":_vm.send}},[_vm._v(\" Oznámiť chybné prípady \"),(_vm.processing)?_c('b-spinner',{attrs:{\"small\":\"\"}}):_vm._e()],1)]):_vm._e(),(_vm.action === 'healthy')?_c('b-container',[_c('button',{staticClass:\"btn btn-success my-2\",attrs:{\"disabled\":_vm.processing},on:{\"click\":_vm.send}},[_vm._v(\" Oznámiť negatívne prípady \"),(_vm.processing)?_c('b-spinner',{attrs:{\"small\":\"\"}}):_vm._e()],1)]):_vm._e()],1):_vm._e(),(_vm.action !== 'select')?_c('b-container',[(_vm.useQR)?_c('qrcode-stream',{on:{\"decode\":_vm.onDecode}}):_c('StreamBarcodeReader',{on:{\"decode\":_vm.onDecode}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"app-pane-lgray py-2\">\n      <b-container>\n        <h1>Oznámenie výsledku testu</h1>\n        <!--\n        <b-form-checkbox v-model=\"useQR\" name=\"useQR\" switch>\n          Používať QR kódy pre testovacie sady\n        </b-form-checkbox>\n        -->\n      </b-container>\n    </div>\n    <b-container v-if=\"action === 'select'\">\n      <h2>Vyberte čo idete nascanovať</h2>\n      <b-row>\n        <b-col>\n          <button\n            class=\"my-2 btn btn-primary bg-danger\"\n            @click=\"action = 'sick'\"\n          >\n            Pozitívne výsledky - Chorí na Covid-19\n          </button>\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col>\n          <button\n            class=\"my-2 btn btn-primary bg-warning text-dark\"\n            @click=\"action = 'repeat'\"\n          >\n            Chybné výsledky - Na pretestovanie\n          </button>\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col>\n          <button\n            class=\"my-2 btn btn-primary bg-success\"\n            @click=\"action = 'healthy'\"\n          >\n            Negatívne výsledky - Zdraví\n          </button>\n        </b-col>\n      </b-row>\n    </b-container>\n    <b-container v-if=\"action === 'sick'\">\n      <button class=\"float-right bg-light my-2 btn btn-light\" @click=\"reset\">\n        Späť na výber akcie\n      </button>\n      <h2>Vyberáte pozitívne nálezy - Chorí</h2>\n    </b-container>\n    <b-container v-if=\"action === 'repeat'\">\n      <button class=\"float-right bg-light my-2 btn btn-light\" @click=\"reset\">\n        Späť na výber akcie\n      </button>\n      <h2>Vyberáte chybné nálezy - Zopakovať test</h2>\n    </b-container>\n    <b-container v-if=\"action === 'healthy'\">\n      <button class=\"float-right bg-light my-2 btn btn-light\" @click=\"reset\">\n        Späť na výber akcie\n      </button>\n      <h2>Vyberáte negatívne nálezy - Zdraví</h2>\n    </b-container>\n    <b-container v-if=\"action !== 'select'\">\n      <b-row>\n        <b-col cols=\"12\">\n          <label for=\"next\">Ďalší kód</label>\n          <b-input v-model=\"next\" ref=\"next\" id=\"next\" />\n          <button\n            :disabled=\"!next\"\n            class=\"btn btn-primary my-2\"\n            @click=\"\n              data.push({\n                code: next,\n                state: 'Na odoslanie',\n                variant: 'alert alert-info',\n              })\n            \"\n          >\n            Pridaj\n          </button>\n        </b-col>\n      </b-row>\n\n      <b-table :items=\"data\" :fields=\"fields\">\n        <template #cell(id)=\"row\">\n          <button\n            @click=\"data.splice(row.index, 1)\"\n            class=\"btn btn-primary m-2 bg-light\"\n          >\n            Zrušiť\n          </button>\n        </template>\n        <template #cell(state)=\"row\">\n          <div :class=\"row.item.variant\">\n            {{ row.item.state }}\n          </div>\n        </template>\n      </b-table>\n\n      <b-container v-if=\"action === 'sick'\">\n        <button\n          :disabled=\"processing\"\n          class=\"btn btn-danger my-2\"\n          @click=\"send\"\n        >\n          Oznámiť pozitívne prípady\n          <b-spinner small v-if=\"processing\" />\n        </button>\n      </b-container>\n      <b-container v-if=\"action === 'repeat'\">\n        <button :disabled=\"processing\" class=\"btn btn-info my-2\" @click=\"send\">\n          Oznámiť chybné prípady\n          <b-spinner small v-if=\"processing\" />\n        </button>\n      </b-container>\n      <b-container v-if=\"action === 'healthy'\">\n        <button\n          :disabled=\"processing\"\n          class=\"btn btn-success my-2\"\n          @click=\"send\"\n        >\n          Oznámiť negatívne prípady\n          <b-spinner small v-if=\"processing\" />\n        </button>\n      </b-container>\n    </b-container>\n    <b-container v-if=\"action !== 'select'\">\n      <qrcode-stream v-if=\"useQR\" @decode=\"onDecode\" />\n      <StreamBarcodeReader v-else @decode=\"onDecode\" />\n    </b-container>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport { QrcodeStream } from \"vue-qrcode-reader\";\n\nimport { StreamBarcodeReader } from \"vue-barcode-reader\";\n\nexport default {\n  components: {\n    StreamBarcodeReader,\n    QrcodeStream,\n  },\n  data() {\n    return {\n      useQR: true,\n      processing: false,\n      processingCount: 0,\n      fields: [\n        {\n          label: \"Akcia\",\n          key: \"id\",\n        },\n        {\n          label: \"Kód testovacej sady\",\n          key: \"code\",\n          sortable: true,\n        },\n        {\n          label: \"Stav\",\n          key: \"state\",\n          sortable: true,\n        },\n      ],\n      data: [],\n      next: \"\",\n      action: \"select\",\n    };\n  },\n  methods: {\n    ...mapActions({\n      SetResults: \"result/SetResults\",\n    }),\n    onDecode(result) {\n      this.next = result;\n    },\n    reset() {\n      this.action = \"select\";\n      this.data = [];\n    },\n    send() {\n      let result = \"error\";\n      if (this.next) {\n        let found = false;\n        for (let index in this.data) {\n          if (this.data[index].code == this.next) found = true;\n        }\n        if (!found) {\n          this.data.push({\n            code: this.next,\n            state: \"Na odoslanie\",\n            variant: \"alert alert-info\",\n          });\n          this.next = \"\";\n        }\n      }\n\n      if (this.action === \"sick\") result = \"positive\";\n      if (this.action === \"healthy\") result = \"negative\";\n      if (this.action === \"repeat\") result = \"test-to-be-repeated\";\n      console.log(\"result\", result, this.data);\n      this.processing = true;\n      this.processingCount = this.data.length;\n      let processed = 0;\n\n      for (let index in this.data) {\n        const code = this.data[index].code;\n        console.log(\"result\", result, code);\n        this.SetResults({ testCode: code, result }).then(r => {\n          processed++;\n          if (r) {\n            console.log(\"sent\", r);\n            this.data[index].state = \"Odoslané\";\n            this.data[index].variant = \"alert alert-success\";\n            if (!r.timeIsValid) {\n              this.data[index].variant = \"alert alert-danger\";\n              this.data[index].state =\n                \"Príliš skoro - Test musí mať prestávku 15 minút\";\n            }\n            if (!r.matched) {\n              this.data[index].state = \"Nespárovaný klient\";\n              this.data[index].variant = \"alert alert-danger\";\n            }\n          }\n          if (processed == this.processingCount) {\n            this.processing = false;\n          }\n        });\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TestResult.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TestResult.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TestResult.vue?vue&type=template&id=9cd699b6&\"\nimport script from \"./TestResult.vue?vue&type=script&lang=js&\"\nexport * from \"./TestResult.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}